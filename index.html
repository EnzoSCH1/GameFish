<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sea Fish Game</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- âœ… Bouton mobile DOIT Ãªtre dans le body (pas dans head) -->
  <button id="btnDashMobile" class="dash-mobile hidden">DASH</button>

  <div id="scene">
    <div class="layer layer-back" data-depth="0.05"></div>
    <div class="layer layer-mid" data-depth="0.12"></div>
    <div class="layer layer-front" data-depth="0.22"></div>

    <div id="caustics">
      <div class="caustic c1"></div>
      <div class="caustic c2"></div>
    </div>

    <div id="bubbles"></div>
    <div id="swimmers"></div>

    <!-- entitÃ©s: food/bonus/malus/powerups + boss -->
    <div id="entities"></div>
    <div id="boss"></div>
  </div>

  <!-- Curseur poisson (visible tout le temps) -->
  <div id="cursorWrap"><div id="cursorFish"></div></div>

  <!-- HUD -->
  <div id="hud">
    <div class="hud-top">
      <div>Niveau : <b id="level">1</b></div>
      <div>Objectif : <b id="score">0</b> / <b id="target">15</b></div>
      <div>Temps : <b id="time">30.0</b>s</div>
      <div>Combo : <b id="combo">x1</b></div>
      <div>Total : <b id="total">0</b></div>
      <div>Best : <b id="best">0</b></div>
    </div>

    <div class="hud-bottom">
      <button id="btnStart">DÃ©marrer</button>
      <button id="btnReset" class="secondary">Recommencer</button>

      <label class="toggle">
        <input type="checkbox" id="soundToggle" checked />
        <span>Son</span>
      </label>
    </div>

    <div class="hint">
      DÃ©place la souris â€¢ Espace / clic droit = Dash â€¢ Attrape lâ€™aimant (bleu) â€¢ Ã‰vite le boss !
    </div>
  </div>

  <!-- OVERLAY -->
  <div id="overlay" class="hidden">
    <div class="panel">
      <div id="overlayTitle">Bienvenue dans Sea Game ğŸŒŠ</div>
      <div id="overlayMsg">Lis les rÃ¨gles puis clique sur DÃ©marrer.</div>

      <!-- âœ… Indication pour dÃ©marrer (menu bienvenue) -->
      <div class="overlay-hint" id="overlayHint">
        â–¶ Appuie sur <b>EntrÃ©e</b> ou clique sur <b>DÃ©marrer</b>
      </div>

      <!-- ğŸ“˜ RÃˆGLES DU JEU (affichÃ©es au lancement) -->
      <div id="rules" class="rules hidden">
        <h3>ğŸŸ Objectif</h3>
        <p>
          Mange les nourritures pour atteindre lâ€™objectif du niveau
          avant la fin du temps.
        </p>

        <h3>â±ï¸ Temps</h3>
        <p>
          Mange rapidement pour Ã©viter que le temps ne sâ€™Ã©coule.
          Certains bonus peuvent tâ€™aider.
        </p>  

        <h3>ğŸ•¹ï¸ ContrÃ´les</h3>
        <ul>
          <li><b>Souris</b> : dÃ©placer le poisson</li>
          <li><b>Doigts (mobile, tablette)</b> : dÃ©placer le poisson</li>
          <li><b>Espace</b> ou <b>clic droit</b> : dash</li>
        </ul>

        <h3>ğŸ½ï¸ Ã‰lÃ©ments</h3>
        <ul>
          <li>ğŸ¥« <b>Nourriture</b> : augmente le score</li>
          <li>âœ¨ <b>Bonus (limace)</b> : temps ou points supplÃ©mentaires</li>
          <li>âš ï¸ <b>Malus (mÃ©duse)</b> : pÃ©nalitÃ© de temps</li>
          <li>ğŸŒŠ <b>Power Dash (coraux)</b> : dash plus frÃ©quent</li>
          <li>ğŸ§² <b>Power Aimant</b> : attire la nourriture</li>
        </ul>

        <h3>ğŸ  Boutique Aquarium</h3>
        <p>
          Gagne de lâ€™XP pour dÃ©bloquer des skins incroyables !!!
          Dans la boutique de l'aquarium, en bas Ã  gauche de ton Ã©cran.
        </p>

        <h3>â¬†ï¸ Upgrades</h3>
        <p>
          AprÃ¨s chaque niveau rÃ©ussi, choisis un upgrade
          pour amÃ©liorer ton poisson.
        </p>

        <h3>ğŸ¦ˆ Danger</h3>
        <p>
          Ã€ partir du niveau 4, un boss te poursuit.
          Ã‰vite-le ou tu perdras du temps !
        </p>
      </div>

      <!-- ğŸ“Š STATS (uniquement fin de run) -->
      <div id="stats" class="stats hidden">
        <div class="stats-grid">
          <div class="stat"><span>Total</span><b id="stTotal">0</b></div>
          <div class="stat"><span>Best</span><b id="stBest">0</b></div>
          <div class="stat"><span>Niveau atteint</span><b id="stLevel">1</b></div>
          <div class="stat"><span>Nourritures</span><b id="stFood">0</b></div>
          <div class="stat"><span>Bonus</span><b id="stBonus">0</b></div>
          <div class="stat"><span>Malus</span><b id="stMalus">0</b></div>
          <div class="stat"><span>Power-ups</span><b id="stPower">0</b></div>
          <div class="stat"><span>Coups boss</span><b id="stBossHits">0</b></div>
          <div class="stat"><span>Meilleur combo</span><b id="stMaxCombo">x1</b></div>
        </div>
      </div>

      <!-- Flash rouge dÃ©gÃ¢ts -->
      <div id="damageFlash"></div>

      <!-- âœ… UPGRADES (aprÃ¨s niveau rÃ©ussi) -->
<div id="upgrades" class="upgrades hidden">
  <h3>Choisis un upgrade ğŸ</h3>

  <div class="upgrades-grid">
    <button class="upgrade-card" id="upSpeedBtn" type="button">
      <div class="u-title">âš¡ Vitesse</div>
      <div class="u-desc">Ton poisson suit plus vite</div>
      <div class="u-level">Niveau: <b id="upSpeedLv">0</b></div>
    </button>

    <button class="upgrade-card" id="upRadiusBtn" type="button">
      <div class="u-title">ğŸ¥« PortÃ©e</div>
      <div class="u-desc">Mange plus facilement (hitbox)</div>
      <div class="u-level">Niveau: <b id="upRadiusLv">0</b></div>
    </button>

    <button class="upgrade-card" id="upDashBtn" type="button">
      <div class="u-title">ğŸŒŠ Dash</div>
      <div class="u-desc">Dash plus souvent (cooldown â†“)</div>
      <div class="u-level">Niveau: <b id="upDashLv">0</b></div>
    </button>

    <!-- ğŸ†• 4e UPGRADE (gÃ©rÃ© par le JS : raretÃ© + effet alÃ©atoire) -->
    <button class="upgrade-card" type="button">
      <div class="u-title">ğŸ² MystÃ¨re</div>
      <div class="u-desc">Effet alÃ©atoire selon raretÃ©</div>
      <div class="u-level">?</div>
    </button>
  </div>

  <div class="u-footer">
    <button id="btnReroll" type="button" class="secondary">
      Reroll (<span id="rerollCost">5</span> XP)
    </button>
    <button id="btnSkipUpgrade" class="secondary hidden">Passer</button>
    XP: <b id="xpTotalUI">0</b>
  </div>
</div>

<!-- Aquarium button (visible only when overlay/menu is visible) -->
<button id="btnAquarium" class="aquarium" type="button" aria-label="Aquarium">
  ğŸ 
  <span id="aquariumBadge" class="badge">0</span>
</button>

      <!-- Actions -->
      <div class="actions">
        <button id="btnPlay">Commencer</button>
        <button id="btnNext">Continuer</button>
        <button id="btnRetry" class="secondary">Rejouer</button>
      </div>
    </div>
  </div>

  <!-- Dash Cooldown Bar (bas centre) -->
<div id="dashCooldownUI">
  <div id="dashCooldownFill"></div>
</div>

<!-- META XP BAR + Aquarium button (persistent progress) -->
<div id="metaUI">
  <div id="metaXPBar">
    <div id="metaXPFill"></div>
  </div>
  <div id="metaXPText">XP: 0 / 50</div>
</div>

<!-- Aquarium / Skins menu -->
<div id="skinOverlay" class="hidden">
  <div class="skin-panel">
    <div class="skin-head">
      <div class="skin-title">Changer de skin</div>
      <button id="btnCloseSkins" type="button" class="secondary">âœ•</button>
    </div>

    <div class="skin-tabs">
      <button id="tabCursor" type="button" class="tab active">Poisson</button>
      <button id="tabBoss" type="button" class="tab">Boss</button>
    </div>

    <div id="skinGrid" class="skin-grid"></div>

    <div class="skin-foot">
      <div id="skinHint" class="skin-hint">DÃ©bloque des skins via la barre XP ğŸ</div>
    </div>
  </div>
</div>


  <script src="app.js"></script>
</body>
</html>
